### –û–ø–∏—Å–∞–Ω–∏–µ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —Å –º–æ–¥–µ–ª—è–º–∏ `GradientBoostingRegressor` –∏ `RandomForestRegressor`

## –¶–µ–ª—å

–ü—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å **–∫–∞—á–µ—Å—Ç–≤–æ –∫—Ä–∞—Å–Ω–æ–≥–æ –≤–∏–Ω–∞** –ø–æ –µ–≥–æ —Ñ–∏–∑–∏–∫–æ-—Ö–∏–º–∏—á–µ—Å–∫–∏–º —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º. –ú—ã –∏—Å—Å–ª–µ–¥—É–µ–º –¥–≤–µ –∞–Ω—Å–∞–º–±–ª–µ–≤—ã–µ –º–æ–¥–µ–ª–∏: `RandomForestRegressor` –∏ `GradientBoostingRegressor`. –í—Å–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã –ø—Ä–æ–≤–æ–¥–∏–ª–∏—Å—å —Å —Ç—Ä–µ–∫–∏–Ω–≥–æ–º —á–µ—Ä–µ–∑ **MLflow**, –¥–∞–Ω–Ω—ã–µ ‚Äî —á–µ—Ä–µ–∑ **DVC**.

---

## –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω—ã –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ –º–æ–¥–µ–ª–∏?

### Random Forest Regressor (–°–ª—É—á–∞–π–Ω—ã–π –ª–µ—Å)
- –†–∞–±–æ—Ç–∞–µ—Ç "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"
- –£—Å—Ç–æ–π—á–∏–≤ –∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—é
- –ù–∏–∑–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫–µ
- –•–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ –∏ —à—É–º–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### Gradient Boosting Regressor (–ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥)
- –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç–µ–ª—å–Ω–∞—è –º–æ—â–Ω–æ—Å—Ç—å –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- –õ—É—á—à–µ —É–ª–∞–≤–ª–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–µ-—Ñ–∞–∫—Ç–æ –≤–æ –º–Ω–æ–≥–∏—Ö ML-–∑–∞–¥–∞—á–∞—Ö 

---

## –ú–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è

- **–î–∞—Ç–∞—Å–µ—Ç**: [`winequality-red.csv`](./data/winequality-red.csv)
- **–¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è**: `quality`
- **–ú–µ—Ç—Ä–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏**:
  - `RMSE` ‚Äî —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞
  - `R¬≤` ‚Äî –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–µ—Ç–µ—Ä–º–∏–Ω–∞—Ü–∏–∏
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: `train_test_split` (80% / 20%)
- **MLflow Tracking**:
  - –ó–∞–ø—É—Å–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `../mlruns`
  - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–∏–∫–ª—ã —Å —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–µ–π –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**:
  - –í—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–¥—É—Ç —á–µ—Ä–µ–∑ `joblib.dump()` 
  - –ü–∞–ø–∫–∞ `model/` –≤ DVC

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–æ–¥–µ–ª—å                    | –õ—É—á—à–∞—è RMSE | –õ—É—á—à–∞—è R¬≤ |
|---------------------------|-------------|-----------|
| RandomForestRegressor     | **0.5576**  | **0.5241**|
| GradientBoostingRegressor| 0.5870     | 0.4725    |

---

## –í—ã–±–æ—Ä –ª—É—á—à–µ–π –º–æ–¥–µ–ª–∏

**–í—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å: `RandomForestRegressor`**

**–ü–ª—é—Å—ã:**
- –í—ã–¥–∞–ª–∞ –ª—É—á—à–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —Ç–µ—Å—Ç–µ (`RMSE ‚Üì`, `R¬≤ ‚Üë`)
- –ú–µ–Ω–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ –≤—ã–±–æ—Ä—É –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ë—ã—Å—Ç—Ä–µ–µ –æ–±—É—á–∞–µ—Ç—Å—è
- –ù–∞–¥–µ–∂–Ω–∞ –ø—Ä–∏ —à—É–º–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ú–∏–Ω—É—Å—ã `GradientBoostingRegressor`:**
- –í –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ –Ω–µ —Å–º–æ–≥ –ø—Ä–µ–≤–∑–æ–π—Ç–∏ RF
- –¢—Ä–µ–±—É–µ—Ç —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ë–æ–ª–µ–µ –ø–æ–¥–≤–µ—Ä–∂–µ–Ω –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—é –Ω–∞ –º–∞–ª—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–±–∏—Ç—å—Å—è R¬≤ ‚âà 1?

–ù–µ—Ç, –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:
- –û—Ü–µ–Ω–∫–∞ –≤–∏–Ω–∞ –∏–º–µ–µ—Ç **—Å—É–±—ä–µ–∫—Ç–∏–≤–Ω—É—é –ø—Ä–∏—Ä–æ–¥—É**
- –ü—Ä–∏–∑–Ω–∞–∫–∏ (–∫–∏—Å–ª–æ—Ç–Ω–æ—Å—Ç—å, —Å–∞—Ö–∞—Ä –∏ —Ç.–¥.) **–Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–±—ä—è—Å–Ω—è—é—Ç –∫–∞—á–µ—Å—Ç–≤–æ**
- –ù–∞–±–ª—é–¥–∞–µ—Ç—Å—è **—à—É–º**, **–¥–∏—Å–±–∞–ª–∞–Ω—Å –∫–ª–∞—Å—Å–æ–≤** –∏ **–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–∞—Ç–∞—Å–µ—Ç–∞**

---

## –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

-  `data/` ‚Äî –¥–∞—Ç–∞—Å–µ—Ç –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º DVC
-  `./experiments/model/` ‚Äî —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª—É—á—à–∞—è –º–æ–¥–µ–ª—å (`best_rf.pkl`), –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ DVC
-  `mlruns/` ‚Äî –ù–ï –≤–∫–ª—é—á—ë–Ω –≤ Git
-  `rf_experiment.py`, `gbr_experiment.py` ‚Äî —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤

---

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–∑ MLflow
GBR
![—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã gbr](./experiments/experimentsres/gbrex.png)

RF
![—ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã rf](./experiments/experimentsres/rfex.png)
---

# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤


### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è 

```bash
git clone https://github.com/neilarphy/mlops-block2-finalproject-wine-quality.git
cd mlops-block2-finalproject-wine-quality
```

###  –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
python -m venv .venv
.venv\Scripts\activate        
pip install -r requirements.txt
```

---

###  DVC: –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–æ–¥–µ–ª–∏
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ config.local –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∫–ª—é—á–∏ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è DVC 
```bash
cp .dvc/config.local.example .dvc/config.local
```

–ó–∞—Ç–µ–º
```bash
dvc pull
```

---

### –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ Airflow

–ú–æ–¥–µ–ª—å –æ–±—É—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑ –≤ –¥–µ–Ω—å —Å –ø–æ–º–æ—â—å—é Apache Airflow. –í—Å–µ —à–∞–≥–∏ ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –æ–±—É—á–µ–Ω–∏–µ, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ DVC ‚Äî —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è DAG'–æ–º (`train_model_daily`).

#### 1. –ü–æ–¥–Ω–∏–º–∏—Ç–µ Airflow:

```bash
docker-compose up --build
```
Airflow –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å—Å—ã–ª–∫–µ
http://localhost:8888

–õ–æ–≥–∏–Ω –ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
airflow airflow

### 2. DAG: `train_model_daily`

- DAG –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å (`@daily`)
- –ß—Ç–æ–±—ã **–∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—É—á–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é**:
  1. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Airflow
  2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –∫ DAG `train_model_daily`
  3. –ù–∞–∂–º–∏—Ç–µ ¬´Trigger DAG¬ª

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –ø–æ–ª–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω:

- `dvc pull` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
- –æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
- `dvc add` –∏ `dvc push` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–õ–æ–≥–∏ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ (`pull`, `train`, `add`, `push`) –¥–æ—Å—Ç—É–ø–Ω—ã –≤ UI Airflow –ø–æ –∫–Ω–æ–ø–∫–µ **Logs** —Ä—è–¥–æ–º —Å –Ω—É–∂–Ω–æ–π –∑–∞–¥–∞—á–µ–π.

---

### –ó–∞–ø—É—Å–∫ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
uvicorn src.api:app --reload --host 127.0.0.1 --port 8000
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
- [`/docs`](http://127.0.0.1:8000/docs) ‚Äî Swagger UI
- [`/healthcheck`](http://127.0.0.1:8000/healthcheck) ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –º–æ–¥–µ–ª–∏
- [`/predict`](http://127.0.0.1:8000/predict) ‚Äî –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ
- [`/model-info`](http://127.0.0.1:8000/model-info) ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏

---

### ‚úÖ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest tests/
```

### üß™ CI/CD —á–µ—Ä–µ–∑ GitHub Actions

–§–∞–π–ª workflow: `.github/workflows/ci.yml`

–¢—Ä–∏–≥–≥–µ—Ä—ã:
- `push` –≤ `main`
- `pull_request`
- —Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ (`workflow_dispatch`)

–≠—Ç–∞–ø—ã:
1. –õ–∏–Ω—Ç–∏–Ω–≥ (`flake8`)
2. –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ —á–µ—Ä–µ–∑ `dvc pull`
3. –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –º–æ–¥–µ–ª–∏ (`upload-artifact`)
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (`pytest`)
